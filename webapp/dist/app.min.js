"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Post=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={newCred:"",title:"",body:"",cred:0,rank:0,publisher:"0x0",timestamp:"0",signature:0,error:""},n.signPost=n.signPost.bind(n),n.voidSignature=n.voidSignature.bind(n),n.onCredChange=n.onCredChange.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){var e=this;credsign.Store({contentID:this.props.id},{fromBlock:0,toBlock:"latest"}).get(function(t,n){credsign.getContentCredSignedByUser(e.props.account,e.props.id,function(t,a){batchread.getCredRanksByContents([e.props.id],function(t,o){e.setState({title:n[0].args.title,body:n[0].args.body,cred:o[0][0].toString(10),rank:o[1][0].toString(10),publisher:n[0].args.publisher,signature:parseInt(a.toString()),timestamp:n[0].args.timestamp})})})})}},{key:"componentDidUpdate",value:function(){document.getElementById("post-"+this.props.id).innerHTML=marked(this.state.body)}},{key:"onCredChange",value:function(e){this.setState({newCred:parseInt(e.target.value)||""})}},{key:"signPost",value:function(){var e=this;this.setState({error:"Confirming on the network, please wait"});var t=this.state.newCred,n=credsign.CRED().times(t);credsign.sign.estimateGas(this.props.id,t,{from:this.props.account,value:n},function(a,o){console.log(o),credsign.sign(e.props.id,t,{from:e.props.account,value:n,gas:o},function(n,a){n?e.setState({error:n.toString()}):e.setState({newCred:"",signature:t,error:""})})})}},{key:"voidSignature",value:function(){var e=this;this.setState({error:"Confirming on the network, please wait"}),credsign.void.estimateGas(this.props.id,{from:this.props.account,value:0},function(t,n){console.log(n),credsign.void(e.props.id,{from:e.props.account,value:0,gas:n},function(t,n){t?e.setState({error:t.toString()}):e.setState({signature:0,error:""})})})}},{key:"render",value:function(){return React.createElement("div",null,React.createElement("div",{style:{backgroundColor:"#FFF"}},React.createElement("div",{style:{maxWidth:"600px",margin:"0 auto"}},React.createElement("div",{style:{padding:"1.5em 1em"}},React.createElement("div",{style:{color:"gray",paddingBottom:"1em"}},React.createElement("span",null,"Posted "+new Date(1e3*this.state.timestamp).toLocaleString()+" by "),React.createElement("a",{href:"#/account/"+this.state.publisher,style:{borderBottom:"2px solid gray",padding:".5em 0",color:"gray"}},this.state.publisher.substr(0,5)+"..."+this.state.publisher.substr(-3)),React.createElement("span",null," in "),React.createElement("a",{href:"#/channel/"+this.props.channel,style:{color:"gray",borderBottom:"2px solid gray",paddingBottom:".5em"}},"#"+this.props.channel)),React.createElement("h1",{style:{}},this.state.title),React.createElement("div",{id:"post-"+this.props.id})))),React.createElement("div",{style:{maxWidth:"600px",margin:"0 auto"}},React.createElement("div",{className:"flex",style:{padding:"1.5em 1em"}},React.createElement("div",{className:"flex-grow",style:{display:"block",textAlign:"left"}},React.createElement("div",{style:{}},React.createElement("span",null,"Rank "+this.state.rank+" with "+this.state.cred+"¢"))),React.createElement("div",{className:"flex-grow",style:{textAlign:"right",display:""==this.props.account?"none":"block"}},React.createElement("input",{type:"text",name:"cred",placeholder:this.state.signature,value:this.state.newCred,onChange:this.onCredChange,style:{textAlign:"right",fontSize:"1em",border:"0",backgroundColor:"transparent",outline:"none"}}),React.createElement("span",{style:{paddingRight:".5em"}},"¢"),React.createElement("a",{onClick:this.signPost,style:{color:"black",display:"inline-block",borderBottom:"2px solid black",paddingBottom:".5em"}},"Sign"))),React.createElement("div",{style:{color:"red",fontSize:"60%",textTransform:"uppercase",fontWeight:"bold",textAlign:"center"}},this.state.error)))}}]),t}(React.Component),Create=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={view:"edit",channel:"",error:""},n.preventHeaderUnbold=function(e){var t=e.target.getAttribute("data-action")||e.target.parentNode.getAttribute("data-action");if("bold"==t)for(var n=document.getElementsByClassName("medium-editor-button-active"),a=0;a<n.length;a++)if(/h+/.test(n[a].getAttribute("data-action","")))return e.stopPropagation(),void e.preventDefault()},n.preventFormatHotkey=function(e){if(e.ctrlKey||e.metaKey)switch(e.keyCode){case 66:case 98:case 73:case 105:case 85:case 117:return e.stopPropagation(),e.preventDefault(),!1}},n.editPost=n.editPost.bind(n),n.previewPost=n.previewPost.bind(n),n.setChannel=n.setChannel.bind(n),n.submitPost=n.submitPost.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){new MediumEditor("#new-post-body",{buttonLabels:"fontawesome",keyboardCommands:!1,toolbar:{buttons:["bold","italic","h2","h3","image","anchor","pre","quote"]},placeholder:{text:"body",hideOnClick:!0}});document.addEventListener("click",this.preventHeaderUnbold,!0),document.addEventListener("keydown",this.preventFormatHotkey)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.preventHeaderUnbold),document.removeEventListener("keydown",this.preventFormatHotkey)}},{key:"editPost",value:function(){this.setState({view:"edit",error:""})}},{key:"previewPost",value:function(){this.setState({view:"preview",error:""}),document.getElementById("new-post-title-preview").innerHTML=document.getElementById("new-post-title").value,document.getElementById("new-post-body-preview").innerHTML=marked(toMarkdown(document.getElementById("new-post-body")))}},{key:"setChannel",value:function(e){this.setState({channel:e.target.innerHTML})}},{key:"submitPost",value:function(){var e=this,t=[],n=document.getElementById("new-post-title").value,a=toMarkdown(document.getElementById("new-post-body"));0==credsign.getChannelByName(this.props.channel)&&t.push("Channel must be between 3 and 30 characters and consist of only letters numbers and underscores"),(n.length<3||n>100)&&t.push("Title must be between 3 and 100 characters"),this.setState({error:t.join(". "),view:"submit"}),0==t.length&&credsign.post.estimateGas(this.props.channel,n,a,{from:this.props.account,value:0},function(t,o){console.log(o),credsign.post(e.props.channel,n,a,{from:e.props.account,value:0,gas:o},function(t){if(t)e.setState({error:t.toString()});else{var n=credsign.Post({publisher:e.props.account},{fromBlock:"latest"});n.watch(function(t,a){n.stopWatching(),t?e.setState({error:t.toString()}):window.location.hash="#/channel/"+e.props.channel+"/post/0x"+a.args.contentID.toString(16)})}})})}},{key:"render",value:function(){var e=this;return React.createElement("div",{style:{width:"100%",margin:"0 auto"}},React.createElement("div",{style:{width:"100%",backgroundColor:"#FFF"}},React.createElement("div",{style:{maxWidth:"600px",margin:"0 auto"}},React.createElement("div",{style:{padding:"2em 1em"}},React.createElement("div",{style:{display:"edit"==this.state.view?"block":"none"}},React.createElement("textarea",{id:"new-post-title",type:"text",placeholder:"title"}),React.createElement("div",{id:"new-post-body",contentEditable:"true"})),React.createElement("div",{style:{display:"edit"!=this.state.view?"block":"none"}},React.createElement("h1",{id:"new-post-title-preview"}),React.createElement("div",{id:"new-post-body-preview"}))))),React.createElement("div",{style:{width:"100%"}},React.createElement("div",{style:{maxWidth:"600px",margin:"0 auto"}},React.createElement("div",{className:"flex",style:{padding:"1.5em 1em"}},React.createElement("div",{className:"flex-grow",style:{textAlign:"left"}},React.createElement("a",{style:{color:"black",display:"edit"==this.state.view?"inline-block":"none",borderBottom:"2px solid black",paddingBottom:".5em"},href:"#/channel/"+this.props.channel},"Cancel"),React.createElement("a",{style:{display:"edit"!=this.state.view?"inline-block":"none",borderBottom:"2px solid black",paddingBottom:".5em"},onClick:this.editPost},"Edit")),React.createElement("div",{className:"flex-grow",style:{textAlign:"right"}},React.createElement("a",{style:{display:"edit"==this.state.view?"inline-block":"none",borderBottom:"2px solid black",paddingBottom:".5em"},onClick:this.previewPost},"Preview"),React.createElement("a",{style:{display:"edit"!=this.state.view?"inline-block":"none",borderBottom:"2px solid black",paddingBottom:".5em"},onClick:this.submitPost},"Publish")),React.createElement("div",{className:"backdrop",style:{width:"100%",height:"100%",opacity:.5,backgroundColor:"black",position:"fixed",zIndex:1,display:"submit"==this.state.view?"block":"none",top:"0",left:"0"}}," "),React.createElement("div",{style:{display:"submit"==this.state.view?"block":"none",left:"50%",top:"30%",marginLeft:"-300px",position:"fixed",zIndex:2,backgroundColor:"#FCFCFC",border:"1px solid #DDD",width:"600px"}},React.createElement("div",{style:{padding:"1em",display:this.state.error.length>0?"block":"none"}},React.createElement("h1",null,"Unable to publish..."),React.createElement("div",{style:{padding:"1em 0"}},this.state.error),React.createElement("span",{onClick:function(){return e.setState({view:"edit",error:""})},style:{borderBottom:"2px solid black",padding:".5em 0",display:"inline-block",cursor:"pointer"}},"Close")),React.createElement("div",{style:{padding:"1em",display:0==this.state.error.length?"block":"none"}},React.createElement("h1",null,"Publishing..."),React.createElement("div",{style:{padding:"1em 0"}},"Your post is being published. This page will redirect to your post once published. If you are not redirected after several minutes, try closing this message and publishing again."),React.createElement("span",{onClick:function(){return e.setState({view:"publish",error:""})},style:{borderBottom:"2px solid black",padding:".5em 0",display:"inline-block",cursor:"pointer"}},"Close")))))))}}]),t}(React.Component),RankedChannels=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={loaded:!1,listItems:[],count:0},n}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){var e=this;credsign.getNumChannels(function(t,n){return 0==n?void e.setState({loaded:!0,listItems:[],count:0}):void batchread.getChannelsByRanks(1,n,function(t,a){for(var o=a[0],r=a[1].map(function(e){return parseInt(e.toString())}),i=a[2].map(function(e){return parseInt(e.toString())}),s=[],l=0;l<o.length;l++){for(var c=o[l],d="";0!=c;)d=String.fromCharCode(c.mod(256))+d,c=c.div(256).floor();s.push({id:"0x"+o[l].toString(16),channelName:d,rank:i[l].toString(),cred:r[l].toString()})}e.setState({loaded:!0,listItems:s,count:n})})})}},{key:"render",value:function(){var e=this.state.listItems.map(function(e){return React.createElement("li",{key:"li-"+e.id,value:e.rank},React.createElement("a",{href:"#/channel/"+e.channelName},React.createElement("div",null,"#"+e.channelName),React.createElement("span",null,"Rank "+e.rank+" with "+e.cred+"¢ signed")))});return React.createElement("div",{className:"view-align"},React.createElement("div",null,React.createElement("span",null,"Top channels"),React.createElement("span",null," ("+this.state.count+")")),React.createElement("ol",null,e))}}]),t}(React.Component),ChannelPosts=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={toggle:!1,listItems:[],filter:"Top",count:0},n.getPosts=n.getPosts.bind(n),n.getTopPosts=n.getTopPosts.bind(n),n.getNewPosts=n.getNewPosts.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"getTopPosts",value:function(e){var t=this;credsign.getChannelByName(e,function(e,n){credsign.getNumContents(n,function(e,a){return 0==a?void t.setState({loaded:!0,listItems:[],count:0}):void batchread.getContentsByRanks(1,a,n,function(e,n){var o=n[0].map(function(e){return"0x"+e.toString(16)}),r=n[1].map(function(e){return parseInt(e.toString())}),i=n[2].map(function(e){return parseInt(e.toString())});console.log(o);for(var s=[],l={},c=0;c<o.length;c++)l[o[c]]=c,s.push({id:o[c],rank:i[c].toString(),cred:r[c].toString()});credsign.Store({contentID:o},{fromBlock:0,toBlock:"latest"}).get(function(e,n){n.forEach(function(e){var t=l["0x"+e.args.contentID.toString(16)];s[t].title=e.args.title,s[t].timestamp=e.args.timestamp}),t.setState({toggle:!t.state.toggle,listItems:s,count:a})})})})})}},{key:"getNewPosts",value:function(e){var t=this;credsign.getChannelByName(e,function(e,n){credsign.getNumContents(n,function(e,a){if(0==a)return void t.setState({loaded:!0,listItems:[],count:0});var o=[];credsign.Store({channelID:n},{fromBlock:0,toBlock:"latest"}).get(function(e,n){n.forEach(function(e){o.unshift({id:"0x"+e.args.contentID.toString(16),title:e.args.title,timestamp:e.args.timestamp,cred:0,rank:0})}),batchread.getCredRanksByContents(o.map(function(e){return e.id}),function(e,r){for(var i=0;i<n.length;i++)o[i].cred=r[0][i].toString(),o[i].rank=r[1][i].toString();t.setState({toggle:!t.state.toggle,listItems:o,count:a})})})})})}},{key:"getPosts",value:function(e){var t=e.target.innerHTML;this.setState({filter:t,menu:!1}),"Top"==t?this.getTopPosts(this.props.channel):this.getNewPosts(this.props.channel)}},{key:"componentDidMount",value:function(){"Top"==this.state.filter?this.getTopPosts(this.props.channel):this.getNewPosts(this.props.channel)}},{key:"componentWillReceiveProps",value:function(e){"Top"==this.state.filter?this.getTopPosts(e.channel):this.getNewPosts(e.channel)}},{key:"render",value:function(){var e=this,t=this.state.listItems.map(function(t){return React.createElement("li",{key:"li-"+t.id,value:t.rank},React.createElement("a",{href:"#/channel/"+e.props.channel+"/post/"+t.id},React.createElement("div",null,t.title),React.createElement("span",null,"Rank "+t.rank+" with "+t.cred+"¢ - Posted "+new Date(1e3*t.timestamp).toLocaleString())))});return React.createElement("div",{className:"view-align"},React.createElement("div",{style:{position:"relative"}},React.createElement("span",{onClick:function(){return e.setState({menu:!e.state.menu})},style:{cursor:"pointer"}},this.state.filter+" ▾"),React.createElement("ul",{onMouseLeave:function(){return e.setState({menu:!1})},style:{position:"absolute",top:"1.5em",left:"0",display:this.state.menu?"block":"none"}},React.createElement("li",{onClick:this.getPosts},"Top"),React.createElement("li",{onClick:this.getPosts},"New")),React.createElement("span",null," posts in #"+this.props.channel),React.createElement("span",null," ("+this.state.count+")")),React.createElement("ol",null,t))}}]),t}(React.Component),Account=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={filter:n.props.filter||"Posted",toggle:!1,listItems:[],count:0},n.getPosts=n.getPosts.bind(n),n.getAddress=n.getAddress.bind(n),n.getPostsPublished=n.getPostsPublished.bind(n),n.getPostsSigned=n.getPostsSigned.bind(n),n.getPostsFunded=n.getPostsFunded.bind(n),n.onFilterChange=n.onFilterChange.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"getAddress",value:function(e){return parseInt(e)>0?e:"-1"}},{key:"componentDidMount",value:function(){var e=this.getAddress(this.props.account);this.getPosts(this.state.filter,e)}},{key:"componentWillReceiveProps",value:function(e){var t=this.getAddress(e.account);this.getPosts(this.state.filter,t)}},{key:"getPosts",value:function(e,t){this.setState({menu:!1,filter:e}),"Posted"==e?this.getPostsPublished(t):"Funded"==e?this.getPostsFunded(t):"Signed"==e&&this.getPostsSigned(t)}},{key:"onFilterChange",value:function(e){var t=e.target.innerHTML,n=this.getAddress(this.props.account);this.getPosts(t,n)}},{key:"getPostsPublished",value:function(e){var t=this;credsign.Post({publisher:e},{fromBlock:0,toBlock:"latest"}).get(function(e,n){var a=[];n.forEach(function(e){return a.unshift("0x"+e.args.contentID.toString(16))});for(var o=[],r={},i=0;i<a.length;i++)r[a[i]]=i,o.unshift({id:a[i],timestamp:parseInt(n[i].args.timestamp.toString(10))});batchread.getCredRanksByContents(a,function(e,n){for(var i=0;i<a.length;i++)o[i].cred=n[0][i].toString(),o[i].rank=n[1][i].toString();credsign.Store({contentID:a},{fromBlock:0,toBlock:"latest"}).get(function(e,n){n.forEach(function(e){for(var t=r["0x"+e.args.contentID.toString(16)],n=e.args.channelID,a="";0!=n;)a=String.fromCharCode(n.mod(256))+a,n=n.div(256).floor();o[t].title=e.args.title,o[t].channelName=a}),t.setState({toggle:!t.state.toggle,listItems:o})})})})}},{key:"getPostsSigned",value:function(e){var t=this;credsign.Sign({signatory:e},{fromBlock:0,toBlock:"latest"}).get(function(e,n){var a=[];n.forEach(function(e){return a.unshift("0x"+e.args.contentID.toString(16))});for(var o=[],r={},i=0;i<a.length;i++)r[a[i]]=i,o.unshift({id:a[i],timestamp:parseInt(n[i].args.timestamp.toString(10))});batchread.getCredRanksByContents(a,function(e,n){for(var i=0;i<a.length;i++)o[i].cred=n[0][i].toString(),o[i].rank=n[1][i].toString();credsign.Store({contentID:a},{fromBlock:0,toBlock:"latest"}).get(function(e,n){n.forEach(function(e){for(var t=r["0x"+e.args.contentID.toString(16)],n=e.args.channelID,a="";0!=n;)a=String.fromCharCode(n.mod(256))+a,n=n.div(256).floor();o[t].title=e.args.title,o[t].channelName=a}),t.setState({toggle:!t.state.toggle,listItems:o})})})})}},{key:"getPostsFunded",value:function(e){var t=this;batchread.getContentsFundedByUser(e,function(e,n){var a=n[0].map(function(e){return"0x"+e.toString(16)}),o=n[1].map(function(e){return parseInt(e.toString())});console.log(a);for(var r=[],i={},s=0;s<a.length;s++)i[a[s]]=s,r.push({id:a[s],credSigned:o[s].toString()});batchread.getCredRanksByContents(a,function(e,n){for(var o=0;o<a.length;o++)r[o].cred=n[0][o].toString(),r[o].rank=n[1][o].toString();credsign.Store({contentID:a},{fromBlock:0,toBlock:"latest"}).get(function(e,n){n.forEach(function(e){for(var t=i["0x"+e.args.contentID.toString(16)],n=e.args.channelID,a="";0!=n;)a=String.fromCharCode(n.mod(256))+a,n=n.div(256).floor();r[t].title=e.args.title,r[t].timestamp=e.args.timestamp,r[t].channelName=a}),t.setState({toggle:!t.state.toggle,listItems:r})})})})}},{key:"render",value:function(){var e=this,t=this.state.listItems.map(function(t){var n="";return n="Posted"==e.state.filter?"Posted "+new Date(1e3*t.timestamp).toLocaleString():"Funded"==e.state.filter?"Signed with "+t.credSigned+"¢":"Signed "+new Date(1e3*t.timestamp).toLocaleString(),React.createElement("li",{key:"li-"+t.id,value:t.rank},React.createElement("a",{href:"#/channel/"+t.channelName+"/post/"+t.id},React.createElement("div",null,t.title),React.createElement("span",null,"Rank "+t.rank+" in #"+t.channelName+" with "+t.cred+"¢ - "+n)))});return React.createElement("div",{className:"view-align"},React.createElement("div",{style:{position:"relative"}},React.createElement("span",{onClick:function(){return e.setState({menu:!e.state.menu})},style:{cursor:"pointer"}},this.state.filter+" ▾"),React.createElement("ul",{onMouseLeave:function(){return e.setState({menu:!1})},onClick:this.onFilterChange,style:{position:"absolute",top:"1.5em",left:"0",display:this.state.menu?"block":"none"}},React.createElement("li",null,"Posted"),React.createElement("li",null,"Funded"),React.createElement("li",null,"Signed")),React.createElement("span",null," by account ("+t.length+")")),React.createElement("ol",null,t))}}]),t}(React.Component),App=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={levelOne:"",levelTwo:"",levelThree:"",levelFour:"",account:"",editChannel:!0,contentID:null},n.route=n.route.bind(n),n.setChannel=n.setChannel.bind(n),window.addEventListener("hashchange",function(){return n.route(window.location.hash)}),n}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){var e=this;this.route(window.location.hash),web3.eth.getAccounts(function(t,n){n.length>0?e.setState({account:n[0]}):e.setState({warn:!0})})}},{key:"setChannel",value:function(e){window.location.hash="#/"+this.state.levelOne+"/"+e.target.value,this.route(window.location.hash)}},{key:"componentDidUpdate",value:function(){document.getElementById("channel").innerHTML=this.state.levelTwo}},{key:"route",value:function(e){var t=e.split("/");t[1]=t.length>1?t[1]:"channel",t[2]=t.length>2?t[2]:"",t[3]=t.length>3?t[3]:"",t[4]=t.length>4?t[4]:"",this.setState({levelOne:t[1],levelTwo:t[2],levelThree:t[3],levelFour:t[4],editChannel:"channel"==t[1]&&""==t[3]||"publish"==t[1]||"account"==t[1]})}},{key:"render",value:function(){var e,t=this;return"channel"==this.state.levelOne?e="post"==this.state.levelThree?React.createElement(Post,{id:this.state.levelFour,channel:this.state.levelTwo,account:this.state.account}):""==this.state.levelTwo?React.createElement(RankedChannels,null):React.createElement(ChannelPosts,{channel:this.state.levelTwo}):"publish"==this.state.levelOne?e=React.createElement(Create,{channel:this.state.levelTwo,account:this.state.account}):"account"==this.state.levelOne&&(e=React.createElement(Account,{account:this.state.levelTwo})),React.createElement("div",{style:{padding:"3em 0"}},React.createElement("div",{style:{position:"fixed",width:"100%",backgroundColor:"#fafafa",borderBottom:"1px solid #DDD",color:"black",fontSize:"1.5em",top:0,fontWeight:"bold",padding:".5em 0",textAlign:"center",zIndex:10}},React.createElement("div",{style:{width:"600px",margin:"0 auto"}},React.createElement("div",{className:"flex",style:{padding:"0 .66em"}},React.createElement("a",{href:"#/channel",className:"flex-grow",style:{color:"black",textAlign:"left",display:"inline-block"}},"Channels"),React.createElement("div",{className:"flex-shrink",style:{display:"inline-block"}},"¢"),React.createElement("a",{href:"#/account/"+this.state.account,className:"flex-grow",style:{color:"black",textAlign:"right",display:"inline-block"}},"Accounts")))),React.createElement("div",{style:{width:"600px",margin:"0 auto",padding:"1.5em 0"}},React.createElement("div",{className:"flex"},React.createElement("div",{className:"flex-grow"},React.createElement("div",{className:"flex",style:{padding:".5em 1em",backgroundColor:"white",borderTop:"2px solid white",borderBottom:"2px solid white",borderRight:"0",borderLeft:"0"}},React.createElement("span",{className:"flex-shrink",style:{color:"gray",fontWeight:"normal"}},"account"==this.state.levelOne?"@":"#"),React.createElement("input",{type:"text",placeholder:"account"==this.state.levelOne?"0x321...":"channel",id:"channel",className:"flex-grow",style:{backgroundColor:"transparent",fontSize:"1em",padding:0,margin:0,border:0,outline:0,placeholderTextColor:"gray",color:"black"},value:this.state.levelTwo,onChange:this.setChannel}))),React.createElement("div",{className:"flex-shrink"},React.createElement("a",{style:{margin:"0 1em",color:"black",display:"publish"==this.state.levelOne||""==this.state.account?"none":"block",borderBottom:"2px solid black",padding:".5em 0"},href:"#/publish/"+("channel"==this.state.levelOne?this.state.levelTwo:"")},"Publish")))),React.createElement("div",{style:{display:this.state.warn?"block":"none"}},React.createElement("div",{className:"backdrop",style:{width:"100%",height:"100%",opacity:.5,backgroundColor:"black",position:"fixed",zIndex:1,top:"0",left:"0"}}," "),React.createElement("div",{style:{left:"50%",top:"30%",marginLeft:"-300px",zIndex:2,position:"fixed",backgroundColor:"#FCFCFC",border:"1px solid #DDD",width:"600px"}},React.createElement("div",{style:{padding:"1em"}},React.createElement("h1",null,"Please link an account"),React.createElement("div",{style:{padding:"1em 0"}},"CredSign was unable to detect your Ethereum account. If you do not have an account, please install Mist or MetaMask and create one. You will need an account to publish and sign content."),React.createElement("span",{onClick:function(){return t.setState({warn:!1})},style:{borderBottom:"2px solid black",padding:".5em 0",display:"inline-block",cursor:"pointer"}},"Close")))),React.createElement("div",null,e),React.createElement("div",{style:{width:"100%",position:"fixed",backgroundColor:"#fafafa",borderTop:"1px solid #DDD",color:"gray",bottom:0,fontSize:"69%",fontWeight:"bold",padding:"1em 0",textTransform:"uppercase",textAlign:"center",zIndex:10}},React.createElement("span",null,"Message us on "),React.createElement("a",{href:"https://facebook.com/CredSign",style:{padding:".5em 0",borderBottom:"2px solid gray",display:"inline-block",color:"gray"}},"Facebook"),React.createElement("span",null," · View source on "),React.createElement("a",{href:"https://github.com/CredSign/credsign.github.io",style:{padding:".5em 0",borderBottom:"2px solid gray",display:"inline-block",color:"gray"}},"Github"),React.createElement("span",null," · Usage governed by "),React.createElement("a",{href:"https://github.com/CredSign/credsign.github.io/blob/master/LICENSE",style:{color:"gray",padding:".5em 0",display:"inline-block",borderBottom:"2px solid gray"}},"terms")))}}]),t}(React.Component);window.App=App,window.toMarkdown=function(e){var t=function(e){return e?e.replace(/\s+/g," ").replace(/[\\\-*_>#]/g,"\\$&"):""},n=function(e,t){return new Array(t+1).join(e)},a=function(e,t){for(var n="",a=0,r=e.childNodes.length;a<r;a++)n+=o(e.childNodes[a],t);return n},o=function(e,o){var r="\n\n";if(3==e.nodeType)return t(e.nodeValue);if(1==e.nodeType){if("block"==o)switch(e.tagName.toLowerCase()){case"br":return r;case"hr":return r+"---"+r;case"p":case"div":case"section":case"address":case"center":return r+a(e,"block")+r;case"ul":return r+a(e,"u")+r;case"ol":return r+a(e,"o")+r;case"pre":return r+"    "+a(e,"inline")+r;case"code":if(1==e.childNodes.length)break;return r+"    "+a(e,"inline")+r;case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":return r+n("#",+e.tagName[1])+"  "+a(e,"inline")+r;case"blockquote":return r+"> "+a(e,"inline")+r}if(/^[ou]+$/.test(o))return"LI"==e.tagName?"\n"+n("  ",o.length-1)+("o"==o[o.length-1]?"1. ":"- ")+a(e,o+"l"):(console.log("[toMarkdown] - invalid element at this point "+o.tagName),a(e,"inline"));if(/^[ou]+l$/.test(o)){if("UL"==e.tagName)return a(e,o.substr(0,o.length-1)+"u");if("OL"==e.tagName)return a(e,o.substr(0,o.length-1)+"o")}switch(e.tagName.toLowerCase()){case"strong":case"b":return"**"+a(e,"inline")+"**";case"em":case"i":return"_"+a(e,"inline")+"_";case"code":return"`"+a(e,"inline")+"`";case"a":return"["+a(e,"inline")+"]("+e.getAttribute("href")+")";case"img":return r+"![: "+t(e.getAttribute("alt"))+"]("+e.getAttribute("src")+")"+r;case"script":case"style":case"meta":return"";default:return console.log("[toMarkdown] - undefined element "+e.tagName),a(e,o)}}};return o(e,"block").replace(/[\n]{2,}/g,"\n\n").replace(/^[\n]+/,"").replace(/[\n]+$/,"")};
//# sourceMappingURL=app.min.js.map
